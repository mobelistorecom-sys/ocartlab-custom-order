<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illustration Dashboard - Artilab Studio</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide-react"></script>

    <style>
        @media print {
            body { background: white !important; margin: 0; padding: 20px; }
            .print-hidden, header, .lg\:col-span-1, button, .no-print { display: none !important; }
            .max-w-7xl { max-width: 100% !important; margin: 0 !important; }
            .bg-indigo-600 { background-color: #4f46e5 !important; -webkit-print-color-adjust: exact; color: white !important; }
            .bg-indigo-50 { background-color: #f5f3ff !important; -webkit-print-color-adjust: exact; }
            .text-indigo-600 { color: #4f46e5 !important; }
            .rounded-3xl, .rounded-2xl { border-radius: 8px !important; }
            .shadow-xl, .shadow-sm { box-shadow: none !important; }
            .grid { display: block !important; }
            .md\:grid-cols-3 { display: flex !important; gap: 10px !important; margin-bottom: 20px !important; }
            .md\:grid-cols-3 > div { flex: 1; border: 1px solid #e2e8f0; }
            .lg\:col-span-3 { width: 100% !important; }
            input, select { border: none !important; appearance: none !important; background: transparent !important; }
            @page { margin: 1cm; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Mengambil ikon dari library Lucide
        const { 
            Plus, Trash2, Copy, Check, Calculator, User, 
            Image, PawPrint, Tag, Percent, Users, Download, 
            Printer, FileText 
        } = LucideReact;

        const { useState, useEffect } = React;

        const App = () => {
            // Data tarif awal (Bisa kamu ubah di sini)
            const [rates, setRates] = useState({
                halfBody: 17.08,
                fullBody: 13.66,
                pet: 10,
                discountPercent: 0 
            });

            // State pesanan (Data awal dari Artilab Studio)
            const [orders, setOrders] = useState([
                { id: 1, clientName: 'Sasha_Isaac', framing: 'fullBody', peopleCount: 2, pets: 0 },
                { id: 2, clientName: 'Pau_Isaac', framing: 'fullBody', peopleCount: 2, pets: 0 },
                { id: 3, clientName: 'Manuel_family', framing: 'fullBody', peopleCount: 4, pets: 0 },
                { id: 4, clientName: 'Antonio_family', framing: 'fullBody', peopleCount: 0, pets: 0 },
                { id: 5, clientName: 'Ale', framing: 'fullBody', peopleCount: 1, pets: 0 },
                { id: 8, clientName: 'Oli_Lama', framing: 'halfBody', peopleCount: 2, pets: 2 },
                { id: 17, clientName: 'Xyzer', framing: 'halfBody', peopleCount: 1, pets: 1 }
            ]);

            const [copiedId, setCopiedId] = useState(null);

            // Kalkulasi Statistik
            const grandSubtotal = orders.reduce((sum, order) => {
                const pricePerPerson = rates[order.framing];
                return sum + ((order.peopleCount || 0) * pricePerPerson) + ((order.pets || 0) * rates.pet);
            }, 0);

            const totalDiscountAmount = grandSubtotal * (rates.discountPercent / 100);
            const grandTotal = grandSubtotal - totalDiscountAmount;

            const addOrder = () => {
                setOrders([{ id: Date.now(), clientName: '', framing: 'halfBody', peopleCount: 1, pets: 0 }, ...orders]);
            };

            const removeOrder = (id) => {
                setOrders(orders.filter(order => order.id !== id));
            };

            const updateOrder = (id, field, value) => {
                setOrders(orders.map(order => order.id === id ? { ...order, [field]: value } : order));
            };

            const calculateSubtotal = (order) => {
                const pricePerPerson = rates[order.framing];
                return ((order.peopleCount || 0) * pricePerPerson) + ((order.pets || 0) * rates.pet);
            };

            const calculateTotal = (order) => {
                const subtotal = calculateSubtotal(order);
                return subtotal - (subtotal * (rates.discountPercent / 100));
            };

            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency', currency: 'USD', minimumFractionDigits: 2
                }).format(amount);
            };

            const handlePrint = () => window.print();

            const copyToClipboard = (order) => {
                const framingLabel = order.framing === 'halfBody' ? 'Half Body' : 'Full Body';
                const subtotal = calculateSubtotal(order);
                const total = calculateTotal(order);
                const text = `*ILLUSTRATION INVOICE*\n\nHi ${order.clientName || 'Client'},\n Framing: ${framingLabel}\n Total People: ${order.peopleCount}\n Total Pets: ${order.pets}\n---------------------------\nTotal: ${formatCurrency(total)}\n\nThank you!`;
                navigator.clipboard.writeText(text);
                setCopiedId(order.id);
                setTimeout(() => setCopiedId(null), 2000);
            };

            return (
                <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-900 overflow-x-hidden">
                    <div className="max-w-7xl mx-auto">
                        <header className="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6 print:hidden">
                            <div>
                                <h1 className="text-3xl font-black text-indigo-700 flex items-center gap-2">
                                    <Calculator className="w-8 h-8" /> Artilab Illustration Dashboard
                                </h1>
                                <p className="text-slate-500 font-medium">SOP & Order Counter for Creative Team.</p>
                            </div>
                            <button onClick={handlePrint} className="bg-slate-800 hover:bg-black text-white px-6 py-3 rounded-2xl flex items-center gap-2 transition-all font-bold shadow-lg">
                                <Download size={18} /> Export as PDF (Print)
                            </button>
                        </header>

                        {/* Stats Bar */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                            <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                                <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1">Subtotal</span>
                                <span className="text-2xl font-black text-slate-700">{formatCurrency(grandSubtotal)}</span>
                            </div>
                            <div className="bg-indigo-50 p-6 rounded-3xl border border-indigo-100">
                                <span className="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-1">Savings ({rates.discountPercent}%)</span>
                                <span className="text-2xl font-black text-indigo-600">-{formatCurrency(totalDiscountAmount)}</span>
                            </div>
                            <div className="bg-indigo-600 p-6 rounded-3xl shadow-xl text-white relative overflow-hidden">
                                <span className="text-[10px] font-black text-indigo-200 uppercase tracking-widest block mb-1">Grand Total Income</span>
                                <span className="text-3xl font-black">{formatCurrency(grandTotal)}</span>
